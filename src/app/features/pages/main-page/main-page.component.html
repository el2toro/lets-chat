<div class="main-page">
<div class="app">
  <div class="conversations">
    <div class="heading">
      <div class="user">
        <div class="avatar">
          <img src="assets/images/portrait1.jpg" alt="img">
          <div class="status" *ngIf="isUserOnline(loggedInUserId)">

          </div>
        </div>
        <div class="name">
           <p>Good Morning</p>
           <p>{{ loggedInUserFullName }}</p>
        </div>
      </div>

      <div class="actions">
         <button>
          <mat-icon svgIcon="plus"></mat-icon>
         </button>
         <button>
          <mat-icon class="bell" svgIcon="bell"></mat-icon>
          <div class="notification"></div>
         </button>
         <button>
          <mat-icon svgIcon="search"></mat-icon>
         </button>
      </div>
    </div>

    <div class="users-conversation">
      <div tabindex="0" class="conversation-item" *ngFor="let user of users" (click)="onUserClick(user)">
      <div class="image">
        <div class="avatar">
          <img src="assets/images/portrait1.jpg" alt="img">
          <div class="status" *ngIf="isUserOnline(user.id)"></div>
        </div>
        <div class="name">
          <p>{{user.name}}</p>
          <p>{{ user.lastMessage }}</p>
        </div>
      </div>
      <div class="time">
         <p>{{ user.lastMessageSendAt | date: 'HH:mm'}}</p>
         <div class="badge" *ngIf="user.messageCount > 0">
            <p>{{ user.messageCount }}</p>
         </div>
      </div>
    </div>
    </div>
  </div>

  <div class="single-conversation" *ngIf="userClicked">
    <div class="heading" >
      <div class="user">
        <div class="avatar">
          <img src="assets/images/portrait1.jpg" alt="img">
          <div class="status" *ngIf="false">

          </div>
        </div>
        <div class="name">
           <p>{{ getSelectedUserFullName() }}</p>
           <p>Last seen Yesterday at 02.30PM</p>
        </div>
      </div>

      <div class="actions">
         <button>
          <mat-icon svgIcon="search"></mat-icon>
         </button>
         <button>
          <mat-icon svgIcon="phone"></mat-icon>
         </button>
         <button>
          <mat-icon svgIcon="ellipsis-vertical"></mat-icon>
         </button>
      </div>
    </div>

    <div class="messages" #chatContainer>
      <ng-template appDynamicHost></ng-template>

      <div class="send-message">
        <button class="emoji-button">
          <mat-icon svgIcon="emoji"></mat-icon>
        </button>

        <div class="vertical-line"></div>
        
        <input type="text" placeholder="Type your message here..." [(ngModel)]="messageContent">
        
        <button class="send-button" (click)="sendMessage()">
          <mat-icon svgIcon="send"></mat-icon>
        </button>
      </div>
    </div>
  </div>
</div>
</div>